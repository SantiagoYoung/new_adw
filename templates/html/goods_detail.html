<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="../../static/css/basic.css" type="text/css">
    <link rel="stylesheet" href="../../static/css/goods_detail.css" type="text/css">
    <script typet="text/javascript" src="http://libs.baidu.com/jquery/1.9.1/jquery.min.js"></script>
</head>
<body>
<div id="nav">
    <div id="navleft">
        <ul>
            <li> <a href="#">嗨，欢迎来到爱定网！</a></li>
            <li id="login"><a href="#">亲，请登录</a></li>
            <li><a href="#">退出登录</a></li>
        </ul>
    </div>
    <div id="navright">
        <ul>
            <li> <a href="#">联系客服</a></li>
            <li> <a href="#"><img src="../../static/images/u356.png">收藏</a></li>
            <li> <a href="#">我的爱定网</a></li>
        </ul>
    </div>
</div>
<div id="header">
    <div id="headerleft">
        <img src="../../static/images/u369.png" style="width:160px;height:65px;">
    </div>
    <div id="headerright">
        <div id="headerrighttext">
            <ul>
                <li id="headerrighttext1">商品</li>
                <li id="headerrighttext2">店铺</li>
            </ul>
        </div>
        <div id="headerrightform">
            <input type="text" name="search" value="请输入需要搜索的内容">
        </div>
        <div id="btn-search">
            <button  value="btn" name="btn">搜索</button>
        </div>
    </div>
    <div id="headerfoot">
        <div id="headerfoot1">
            <ul >
                <li id="dingzhi"><a href="#">在线定制</a></li>
                <li><a href="#">店铺入驻</a></li>
                <li><a href="#">定制问问</a></li>
            </ul>
        </div>
        <div id="headerfoot2">
            <ul >
                <li ><a  id="made_bags" href="#">包包定制</a></li>
                <li><a href="#">配饰定制</a></li>
                <li><a href="#">服装定制</a></li>
            </ul>
        </div>
    </div>
</div>

<div id="content">
    <div>
        <div id="picture"></div>
        <div id="price">
            <div id="price_top">

                <button type="submit">立刻购买</button>
            </div>
            <div id="price_btn">
                <button id="btn_collectgoods">收藏商品</button>
                <button id="btn_collectstores">收藏店铺</button>
                <button id="share">分享</button>
                <button id="">投诉</button>
                <button>在线咨询</button>
            </div>
        </div>
    </div>
    <div id="small_pic"></div>
    <div id="introduction">
        <h1>商品详情</h1>
        <div>
            <p>商品介绍</p>
        </div>
        <div>
            <p>整体款式</p>
        </div>
        <div>
            <p>细节做工</p>
        </div>
        <div>
            <p>服务说明</p>
        </div>
    </div>
</div>



<div id="footer">
    <div id="footer2">
        <dl id="contact">
            <dt id="kefu"><img src="../../static/images/u312.png" style="width:30px;height:30px">爱定网客服热线</dt>
            <dd id="phone">028-84340607</dd>
            <dd>在线咨询<img src="../../static/images/u320.png"></dd>
            <dd>周一至周日 <span>09:00-22:00</span> </dd>
        </dl>
        <dl >
            <dt class="help">用户帮助</dt>
            <dd>意见反馈</dd>
            <dd>法律声明</dd>
            <dd>服务协议</dd>
        </dl>
        <dl >
            <dt class="help">关于我们</dt>
            <dd>关于我们</dd>
            <dd>联系我们</dd>
            <dd>商家推广</dd>
        </dl>
        <dl>
            <dt class="help">关注我们</dt>
            <dd>新浪微博</dd>
            <dd>qq空间</dd>
        </dl>
        <dl >
            <dt class="help">爱定网官方微信号</dt>
            <dd> <img src="../../static/images/u310.jpg" style="width:120px;height:120px"></dd>
        </dl>
    </div>
    <div id="footer3">
        <p id="p1">友情链接:</p>
        <p id="p2">Copyright @ 2013爱定网 All Right Reserved</p>
    </div>
</div>
<script>
    var change1=document.getElementById("headerrighttext1");
    var change2=document.getElementById("headerrighttext2");
    change1.style.background="red";
    change1.style.color="white";
    var btn_click=1;
    var mouse_over_btn1=function(){
        change1.style.background="white";
        change1.style.color="red";
    }
    var mouse_out_btn1=function(){
        if(btn_click=1){
            change1.style.background="red";
            change1.style.color="white";
        }
        else{
            change1.style.background="white";
            change1.style.color="black";
        }
    }
    var click_btn1=function(){
        btn_click==1;
        change1.style.background="red";
        change1.style.color="white";
        change2.style.background="white";
        change2.style.color="black";
    }
    var mouse_over_btn2=function(){
        change2.style.background="white";
        change2.style.color="red";
    }
    var mouse_out_btn2=function(){
        if(btn_click==2){
            change2.style.background="red";
            change2.style.color="white";
        }
        else{
            change2.style.background="white";
            change2.style.color="black";
        }
    }
    var click_btn2=function(){
        btn_click=2;
        change2.style.background="red";
        change2.style.color="white";
        change1.style.background="white";
        change1.style.color="black";
    }
    change1.onclick=click_btn1;
    change1.onmouseover=mouse_over_btn1;
    change1.onmouseout= mouse_out_btn1;
    change2.onclick=click_btn2;
    change2.onmouseover=mouse_over_btn2;
    change2.onmouseout= mouse_out_btn2;


//获取URL中的属性值
    function request(paras){
        var url = location.href;
        var paraString = url.substring(url.indexOf("?")+1,url.length).split("&");
        var paraObj = {}
        for (i=0; j=paraString[i]; i++){
            paraObj[j.substring(0,j.indexOf("=")).toLowerCase()] = j.substring(j.indexOf("=")+1,j.length);
        }
        var returnValue = paraObj[paras.toLowerCase()];
        if(typeof(returnValue)=="undefined"){
            return "";
        }else{
            return returnValue;
        }
    }
    var theid=request('id');
    var id={
        id:theid
    }

    $.ajax({
        data:id,
        type: "post",
        url: "http://192.168.0.101:8080/goods/goods_detail/",
        datatype: "json",
        success:function(data){
            var pic=document.getElementById("picture");
            var price=document.getElementById("price_top");
            var price_btn=document.getElementById("price_btn");
            var small_pic=document.getElementById("small_pic");
            var introduction=document.getElementById("introduction");
            var strhtml="";
            var title="";
            $.each(data,function(index,el){
                strhtml+="<img src='http://192.168.0.101:8080"+el.picture+"'>"
                title+="<p>"+el.name+"</p>"
                + "<label>原价</label><input value=\""+el.origin_price+"\"></br></br>"
                    + "<label>现价</label><input value=\""+el.new_price+"\"></br></br>"
                pic.innerHTML=strhtml;
                price.innerHTML=title;
            })
        }
    });


    //收藏商品
    $("#btn_collectgoods").click(function(){
        var users={
            id:theid,
            status:0
        }
        $.ajax({
            url:"http://192.168.0.101:8080/goods/collect_goods/",
            data:users,
            type:"post",
            datatype:"json",
            contenttype:"application/json",
            success:function(){
                document.getElementById("btn_collectgoods").innerHTML="已收藏"
            }
        })
    });

    //收藏店铺
    $("#btn_collectstores").click(function(){
        var user={
            id:theid,
            status:1
        }
        $.ajax({
            url:"http://192.168.0.101:8080/store/collect_store/",
            data:user,
            type:"post",
            datatype:"json",
            contenttype:"application/json",
            success:function(){
                document.getElementById("btn_collectstores").innerHTML="已收藏";
                var btn=document.getElementsByTagName("button");
                alert(btn)
                btn[1].setAttribute("id","btn_clearcollectstores")
            }
        })
    });
    $("#btn_clearcollectstores").click(function(){
        alert("kkk")
        var user={
            id:theid,
            status:0
        }
        $.ajax({
            url:"http://192.168.0.101:8080/store/collect_store/",
            data:user,
            type:"post",
            datatype:"json",
            contenttype:"application/json",
            success:function(){
                document.getElementById("btn_clearcollectstores").innerHTML="收藏店铺";
                var btn=document.getElementsByTagName("button")
                btn[1].setAttribute("id","btn_collectstores")

            }
        })
    });

</script>
</body>
</html>
